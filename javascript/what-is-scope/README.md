# 什么是作用域？

  首先大家都喜欢称呼JavaScript为解释性语言，实际上它和传统的编译语言也很类似

  编译语言的编译过程

  - 分词/词法解析：将字符串转化成一个个词法单元。
  - 解析/语法分析：将词法单元流转换为结构化的抽象语法树（AST）。
  - 代码生成： 将抽象语法树转化为可执行代码。

  JavaScript不仅仅需要在代码执行前做这些事情，还需要做数项的性能优化，那为什么人们还叫它解释性语言呢？它的编译过程往往只在执行前的几微秒（或许更短）。

  了解这些前提知识，接下来认识作用域： 用来确定何处以及如何查找到变量。

  这里还需要了解两个角色：引擎和编译器。

```JavaScript
  var a = 123
```

  对于上面的代码，会这样执行：

  - 首先在编译阶段，编译器会通过作用域确定a是否存在，如果不存在，便会声明一个a变量，否则直接跳过。
  - 在执行阶段，引擎会通过作用域查找a，如果当前作用域存在a，那么直接赋值，否则继续向上层查找。

  引擎和作用域的操作有两种：

  - LHS: 赋值操作
  - RHS: 读取操作

  作用域向上查找是有终止条件的，也就是到达全局作用域则不再向上查找。在非严格模式下，如果在全局作用域仍然没有查找到该变量，那么就会在全局作用域自动创建该变量。后来在严格模式下，不再自动创建，而是抛出ReferenceError。

  这里我们可以区别以下错误：

  - ReferenceError: 说明引擎并没有查找到该变量。
  - TypeError: 说明引擎找到了该变量，只是操作非法。
