# 通信协议

  首先Redis的作用认为数据库的瓶颈一般不在于网络流量，而在于数据库内部的处理。所以即使Redis使用了浪费流量的文本协议，依旧能有很高访问性能。单个节点跑满CPU核心的情况下可以达到10w/s的QPS。

###  RESP（Redis Serialization Protocol）

  RESP是Redis序列化协议的简写。它是一种直观的文本协议，实现非常的简单，解析性能极好。

  Redis协议将传输的结构数据分为5种最小的单元类型，单元结束时统一加上回车换行符号'\r\n'

  - 单行字符串以 + 符号开头
  - 多行字符串以 $ 符号开头 后面紧接着字符串的长度  
  - 整数值以 : 符号开头
  - 错误信息以 - 符号开头
  - 数组以 * 符号开头，后面紧接着数组的长度

```s
  # 单行字符串
  +hello world\r\n

  # 多行字符串
  $11\r\nhello world\r\n

  # 整数
  :1024\r\n

  # 错误
  -something is error

  # 数组
  *3\r\n:1\r\n:2\r\n\:3\r\n

  # NULL长度为-1
  $-1\r\n

  # 空串长度为0
  $0\r\n\r\n
```