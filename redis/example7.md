# 简单限流

### 第一次实现

  一开始采用了Redis中的string、incrby以及expire来实现。

  存在的问题就是，这种限流并不是在一个时间区域中的，例如我们限流1秒里一个用户只能请求5次，那么用户在59秒点击4下，在61秒也可以点击4下，这种情况是不允许的。

  更重要的是解决不了并发的情况。

### 第二次实现

  node-redis中自动使用pipeline。通过multi保证redis一系列操作的原子性。通过uuid作为唯一标识，时间戳为score。通过不断删除zset中超出时间限制范围的数据，以便获取当前限制时间内的请求数，从而判断后续请求是否被限流。
