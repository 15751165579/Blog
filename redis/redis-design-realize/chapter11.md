 # 事件

 ### Reids中的事件类型

  首先Redis是一个事件驱动的程序（同样的还有NodeJS, Nginx）,包含两种事件类型：

  - 文本事件：服务器通过套接字与客户端通信。
  - 时间事件：例如前面所谈到的serverCron执行周期性任务。

### 文本事件

  Reids中的文本事件是对套接字操作的抽象，采用IO多路复用的技术。

  文本事件处理器基于Reactor模式实现的网络通信程序，其过程：

  - 1) 发送连接请求
  - 2) 发送命令请求
  - 3) 服务器向客户端发送命令回复

### 时间事件

  Redis中的时间事件分为两种：

  - 定时事件
  - 定期事件

  Redis中时间事件存储在无序链表中，每次遍历链表中的时间事件执行，由于并没有太多的时间事件，无序链表并不会影响时间事件执行的效率。

  常见的上时间事件就是前面提到的serverCron，它主要负责的任务：

  - 统计数据，例如：时间、内存占用、系统占用等
  - 过期键值对的处理
  - AOF和RDB持久化
  - 关闭和清理无效的客户端连接
  - 主从模式下，定期处理从服务器的同步
  - 集群模式下，定期对集群进行同步和连接测试

### 总结

  对于这两种类型的事件，服务器会轮流处理，并且在处理事件的过程中也不会抢占。