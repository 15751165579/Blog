# 基础数据结构Set

### 基本操作

```s
  # 添加一个或者多个值
  sadd key member1 member2
```

```s
  # 判断成员是否输入改集合
  sismember key member1
```

```s
  # 成员数量
  scard key
```

```s
  # 移除操作
  srem key member1
```

  还有一些集合的运算操作。

### 整数集合

  当集合中存储的全是整数时，底层会采用intset存储。inset中主要有三个字段：encoding、length以及contents。

  这里特别需要注意的的intset会根据存入整数的类型，采用不同的编码方式，如：int_16、int_32、int_64。这样的好处主要是极大的提高内存的利用率。

  当然采用这样的方式，那么在存入一个整形数据的时候就需要检测它的类型，判断是否需要升级inset。

  升级的步骤：

  - （1）根据新元素的类型调整底层数组的空间大小，并且为新元素分配空间。
  - （2）将底层数组现有的元素转化为新元素相同的类型，保持有序性。
  - （3）将新元素添加到底层数组。

  并且一旦Inset升级之后，不能降级。